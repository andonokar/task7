import unittest
import subprocess


class Task7Test(unittest.TestCase):
    def test_main_with_file(self):
        result = subprocess.run(['python', 'main.py', "test.json"], capture_output=True, text=True).stdout
        expected = "[1, 0, 0, 0, 0, 0, 0, 1, 1, 1]\n"
        self.assertEqual(expected, result)

    def test_main_with_raw(self):
        json_str = """
            [
            {
                "0": -0.01,
                "1": 1.28,
                "2": -3.76,
                "3": -0.05,
                "4": -0.67,
                "5": -3.64,
                "6": 0.96,
                "7": 1.26,
                "8": 1.67,
                "9": 1.84,
                "10": 0.17,
                "11": -2.85,
                "12": 2.25,
                "13": 0.51,
                "14": -2.2,
                "15": 0.69,
                "16": -0.46,
                "17": 0.7,
                "18": -0.34,
                "19": -0.03,
                "20": 0.18,
                "21": -0.4,
                "22": 0.66,
                "23": 0.47,
                "24": -0.34,
                "25": -0.97,
                "26": 0.74,
                "27": -0.31,
                "28": 0.83,
                "29": -0.63,
                "30": 1.71,
                "31": 0.95,
                "32": 0.47,
                "33": -0.16,
                "34": -0.72,
                "35": 0.73,
                "36": -1.44,
                "37": 0.06,
                "38": 0.36,
                "39": 0.12,
                "40": 0.16,
                "41": -0.08,
                "42": -0.05,
                "43": -0.07,
                "44": -0.02,
                "45": -0.04,
                "46": 0.71,
                "47": -0.84,
                "48": 0.72,
                "49": -0.36,
                "50": -0.81,
                "51": -0.78,
                "52": -0.48,
                "53": 0.88,
                "54": 0.76,
                "55": 0.5,
                "56": 0.51,
                "57": -0.25,
                "58": -0.24,
                "59": -0.55,
                "60": -0.57,
                "61": -1.12,
                "62": 0.18,
                "63": 0.15,
                "64": 0.32,
                "65": -1.73,
                "66": -0.43,
                "67": 0.76,
                "68": -0.71,
                "69": -0.45,
                "70": 1.5,
                "71": -0.74,
                "72": -0.07,
                "73": -0.05,
                "74": 0.27,
                "75": -0.81,
                "76": 0.16,
                "77": -1.15,
                "78": 0.38,
                "79": -0.06,
                "80": 0.64,
                "81": 0.58,
                "82": 0.01,
                "83": -0.15,
                "84": -0.01,
                "85": 0.27,
                "86": 0.07,
                "87": -0.07
            }]"""
        result = subprocess.run(['python', 'main.py', json_str], capture_output=True, text=True).stdout
        expected = "[1]\n"
        self.assertEqual(expected, result)


if __name__ == '__main__':
    unittest.main()
